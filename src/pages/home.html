<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroCompras - Histórico de Cenários</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .font-inter { font-family: 'Inter', sans-serif; }
        .font-poppins { font-family: 'Poppins', sans-serif; }
        
        .gradient-bg {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 50%, #bbf7d0 100%);
        }
        
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .status-approved {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .status-pending {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .status-analyzing {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .modal-backdrop {
            backdrop-filter: blur(8px);
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .table-row-hover:hover {
            background-color: #f8fafc;
        }
        
        .action-button {
            transition: all 0.2s ease;
        }
        
        .action-button:hover {
            transform: scale(1.1);
        }
        
        .step-content {
            transition: opacity 0.3s ease-in-out;
        }
        
        .step-content.hidden {
            opacity: 0;
        }
        
        .step-content:not(.hidden) {
            opacity: 1;
        }
        
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: white;
            min-width: 180px;
            box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
            border-radius: 8px;
            z-index: 1000;
            border: 1px solid #e5e7eb;
            overflow: hidden;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from {opacity: 0; transform: translateY(-10px);}
            to {opacity: 1; transform: translateY(0);}
        }
        
        .dropdown-item {
            color: #374151;
            padding: 12px 16px;
            text-decoration: none;
            display: flex;
            align-items: center;
            font-size: 14px;
            transition: background-color 0.2s ease;
            cursor: pointer;
        }
        
        .dropdown-item:hover {
            background-color: #f3f4f6;
        }
        
        .dropdown-item i {
            margin-right: 8px;
            width: 16px;
        }
        
        .dropdown-item.approve:hover {
            background-color: #dcfce7;
            color: #166534;
        }
        
        .dropdown-item.danger:hover {
            background-color: #fef2f2;
            color: #dc2626;
        }
    </style>
</head>
<body class="font-inter bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <img src="xU_PVpg3NNFQz-NQXVIUR" alt="AgroCompras Logo" class="w-10 h-10">
                    <div>
                        <h1 class="font-poppins font-bold text-2xl text-gray-800">AgroCompras</h1>
                        <p class="text-sm text-gray-600">Gestão Inteligente de Compras</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="text-right">
                        <p class="text-sm font-medium text-gray-800">Fazenda São Paulo</p>
                        <p class="text-xs text-gray-600">João Silva - Administrador</p>
                    </div>
                    <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold text-sm">JS</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-6 py-8">
        <!-- Título e Ação Principal -->
        <div class="flex items-center justify-between mb-8">
            <div>
                <h2 class="font-poppins font-bold text-3xl text-gray-800 mb-2">Histórico de Cenários</h2>
                <p class="text-gray-600">Gerencie e acompanhe todos os seus cenários de compra</p>
            </div>
            
            <button onclick="openCreateScenarioModal()" 
                    class="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition flex items-center space-x-2 pulse-animation">
                <i class="fas fa-plus"></i>
                <span>Novo Cenário</span>
            </button>
        </div>

        <!-- Cards de Resumo -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- Total de Cenários -->
            <div class="bg-white rounded-xl p-6 card-shadow card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Total de Cenários</p>
                        <p class="text-3xl font-bold text-gray-800 mt-1">27</p>
                        <p class="text-sm text-green-600 mt-1">
                            <i class="fas fa-arrow-up mr-1"></i>+3 esta semana
                        </p>
                    </div>
                    <div class="bg-blue-100 p-3 rounded-full">
                        <i class="fas fa-chart-line text-2xl text-blue-600"></i>
                    </div>
                </div>
            </div>

            <!-- Cenários Aprovados -->
            <div class="bg-white rounded-xl p-6 card-shadow card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Aprovados</p>
                        <p class="text-3xl font-bold text-green-600 mt-1">18</p>
                        <p class="text-sm text-gray-500 mt-1">66,7% do total</p>
                    </div>
                    <div class="bg-green-100 p-3 rounded-full">
                        <i class="fas fa-check-circle text-2xl text-green-600"></i>
                    </div>
                </div>
            </div>

            <!-- Aguardando Análise -->
            <div class="bg-white rounded-xl p-6 card-shadow card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Aguardando</p>
                        <p class="text-3xl font-bold text-yellow-600 mt-1">7</p>
                        <p class="text-sm text-gray-500 mt-1">25,9% do total</p>
                    </div>
                    <div class="bg-yellow-100 p-3 rounded-full">
                        <i class="fas fa-clock text-2xl text-yellow-600"></i>
                    </div>
                </div>
            </div>

            <!-- Economia Total -->
            <div class="bg-white rounded-xl p-6 card-shadow card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Economia Total</p>
                        <p class="text-3xl font-bold text-green-600 mt-1">R$ 847K</p>
                        <p class="text-sm text-green-600 mt-1">
                            <i class="fas fa-arrow-up mr-1"></i>26,3% média
                        </p>
                    </div>
                    <div class="bg-green-100 p-3 rounded-full">
                        <i class="fas fa-piggy-bank text-2xl text-green-600"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filtros e Ações -->
        <div class="bg-white rounded-xl p-6 card-shadow mb-8">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                <div class="flex flex-wrap items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-gray-700">Filtrar por:</label>
                    </div>
                    
                    <select class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">Todas as Culturas</option>
                        <option value="soja">Soja</option>
                        <option value="milho">Milho</option>
                        <option value="algodao">Algodão</option>
                        <option value="trigo">Trigo</option>
                    </select>
                    
                    <select class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">Todos os Alvos</option>
                        <option value="buva-caruru">Buva + Caruru (Conyza spp. + Amaranthus spp.)</option>
                        <option value="lagarta-cartucho">Lagarta-do-cartucho (Spodoptera frugiperda)</option>
                        <option value="acaro-pulgao">Ácaro + Pulgão (Tetranychus urticae + Aphis gossypii)</option>
                        <option value="ferrugem-asiatica">Ferrugem-asiática (Phakopsora pachyrhizi)</option>
                        <option value="percevejo-marrom">Percevejo-marrom (Euschistus heros)</option>
                        <option value="lagarta-soja">Lagarta-da-soja (Anticarsia gemmatalis)</option>
                        <option value="mosca-branca">Mosca-branca (Bemisia tabaci)</option>
                        <option value="tripes">Tripes (Thrips tabaci)</option>
                    </select>
                    
                    <select class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">Todos os Status</option>
                        <option value="aprovado">Aprovado</option>
                        <option value="aguardando">Aguardando</option>
                        <option value="analisando">Analisando</option>
                    </select>
                    
                    <input type="date" class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                

            </div>
        </div>

        <!-- Tabela de Cenários -->
        <div class="bg-white rounded-xl card-shadow overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-200">
                <h3 class="font-semibold text-lg text-gray-800">Histórico de Cenários</h3>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Demanda</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cultura</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Alvo</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Área (ha)</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Resultado</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <!-- Linha 1 -->
                        <tr class="table-row-hover">
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">15/07/2025</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">Fazenda São João</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">
                                    Soja à Vista 2025
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Soja V4-V6</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-900">Buva + Caruru</div>
                                <div class="text-xs text-gray-500">Conyza spp. + Amaranthus spp.</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">1.500</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-bold text-green-600">R$ 113.400</div>
                                <div class="text-xs text-gray-500">26,5% economia</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                    Aprovado
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                <div class="dropdown">
                                    <button class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition flex items-center space-x-2">
                                        <i class="fas fa-cog"></i>
                                        <span>Opções</span>
                                        <i class="fas fa-chevron-down text-xs"></i>
                                    </button>
                                    <div class="dropdown-content">
                                        <div class="dropdown-item approve" onclick="aprovarCenario(1)">
                                            <i class="fas fa-check-circle text-green-600"></i>
                                            <span>Aprovar Cenário</span>
                                        </div>
                                        <div class="dropdown-item" onclick="visualizarCenario(1)">
                                            <i class="fas fa-eye text-blue-600"></i>
                                            <span>Visualizar</span>
                                        </div>
                                        <div class="dropdown-item" onclick="duplicarCenario(1)">
                                            <i class="fas fa-copy text-green-600"></i>
                                            <span>Duplicar</span>
                                        </div>
                                        <div class="dropdown-item" onclick="downloadRelatorio(1)">
                                            <i class="fas fa-download text-yellow-600"></i>
                                            <span>Download Relatório</span>
                                        </div>
                                        <div class="dropdown-item danger" onclick="excluirCenario(1)">
                                            <i class="fas fa-trash text-red-600"></i>
                                            <span>Excluir</span>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- Linha 2 -->
                        <tr class="table-row-hover">
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">12/07/2025</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">Agropecuária Silva</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800">
                                    Milho à Prazo 2026
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Milho V8-V10</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-900">Lagarta-do-cartucho</div>
                                <div class="text-xs text-gray-500">Spodoptera frugiperda</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2.200</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-bold text-green-600">R$ 185.600</div>
                                <div class="text-xs text-gray-500">31,2% economia</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">
                                    Aguardando
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                <div class="dropdown">
                                    <button class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition flex items-center space-x-2">
                                        <i class="fas fa-cog"></i>
                                        <span>Opções</span>
                                        <i class="fas fa-chevron-down text-xs"></i>
                                    </button>
                                    <div class="dropdown-content">
                                        <div class="dropdown-item approve" onclick="aprovarCenario(2)">
                                            <i class="fas fa-check-circle text-green-600"></i>
                                            <span>Aprovar Cenário</span>
                                        </div>
                                        <div class="dropdown-item" onclick="visualizarCenario(2)">
                                            <i class="fas fa-eye text-blue-600"></i>
                                            <span>Visualizar</span>
                                        </div>
                                        <div class="dropdown-item" onclick="duplicarCenario(2)">
                                            <i class="fas fa-copy text-green-600"></i>
                                            <span>Duplicar</span>
                                        </div>
                                        <div class="dropdown-item" onclick="downloadRelatorio(2)">
                                            <i class="fas fa-download text-yellow-600"></i>
                                            <span>Download Relatório</span>
                                        </div>
                                        <div class="dropdown-item danger" onclick="excluirCenario(2)">
                                            <i class="fas fa-trash text-red-600"></i>
                                            <span>Excluir</span>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- Linha 3 -->
                        <tr class="table-row-hover">
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">10/07/2025</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">Fazenda Esperança</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800">
                                    Algodão à Vista 2025
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Algodão F1-F3</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-900">Ácaro + Pulgão</div>
                                <div class="text-xs text-gray-500">Tetranychus urticae + Aphis gossypii</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">800</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-bold text-green-600">R$ 96.800</div>
                                <div class="text-xs text-gray-500">28,7% economia</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                    Aprovado
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                <div class="dropdown">
                                    <button class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition flex items-center space-x-2">
                                        <i class="fas fa-cog"></i>
                                        <span>Opções</span>
                                        <i class="fas fa-chevron-down text-xs"></i>
                                    </button>
                                    <div class="dropdown-content">
                                        <div class="dropdown-item approve" onclick="aprovarCenario(3)">
                                            <i class="fas fa-check-circle text-green-600"></i>
                                            <span>Aprovar Cenário</span>
                                        </div>
                                        <div class="dropdown-item" onclick="visualizarCenario(3)">
                                            <i class="fas fa-eye text-blue-600"></i>
                                            <span>Visualizar</span>
                                        </div>
                                        <div class="dropdown-item" onclick="duplicarCenario(3)">
                                            <i class="fas fa-copy text-green-600"></i>
                                            <span>Duplicar</span>
                                        </div>
                                        <div class="dropdown-item" onclick="downloadRelatorio(3)">
                                            <i class="fas fa-download text-yellow-600"></i>
                                            <span>Download Relatório</span>
                                        </div>
                                        <div class="dropdown-item danger" onclick="excluirCenario(3)">
                                            <i class="fas fa-trash text-red-600"></i>
                                            <span>Excluir</span>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- Linha 4 -->
                        <tr class="table-row-hover">
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">08/07/2025</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">Cooperativa Central</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">
                                    Trigo à Vista 2025
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Trigo V6-V8</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-900">Ferrugem-asiática</div>
                                <div class="text-xs text-gray-500">Phakopsora pachyrhizi</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">3.200</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-bold text-green-600">R$ 280.000</div>
                                <div class="text-xs text-gray-500">22,8% economia</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">
                                    Aguardando
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                <div class="dropdown">
                                    <button class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition flex items-center space-x-2">
                                        <i class="fas fa-cog"></i>
                                        <span>Opções</span>
                                        <i class="fas fa-chevron-down text-xs"></i>
                                    </button>
                                    <div class="dropdown-content">
                                        <div class="dropdown-item approve" onclick="aprovarCenario(4)">
                                            <i class="fas fa-check-circle text-green-600"></i>
                                            <span>Aprovar Cenário</span>
                                        </div>
                                        <div class="dropdown-item" onclick="visualizarCenario(4)">
                                            <i class="fas fa-eye text-blue-600"></i>
                                            <span>Visualizar</span>
                                        </div>
                                        <div class="dropdown-item" onclick="duplicarCenario(4)">
                                            <i class="fas fa-copy text-green-600"></i>
                                            <span>Duplicar</span>
                                        </div>
                                        <div class="dropdown-item" onclick="downloadRelatorio(4)">
                                            <i class="fas fa-download text-yellow-600"></i>
                                            <span>Download Relatório</span>
                                        </div>
                                        <div class="dropdown-item danger" onclick="excluirCenario(4)">
                                            <i class="fas fa-trash text-red-600"></i>
                                            <span>Excluir</span>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- Linha 5 -->
                        <tr class="table-row-hover">
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">05/07/2025</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">Fazenda Boa Vista</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">
                                    Soja à Vista 2025
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Soja R1-R3</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-900">Percevejo-marrom</div>
                                <div class="text-xs text-gray-500">Euschistus heros</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2.800</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-bold text-green-600">R$ 420.000</div>
                                <div class="text-xs text-gray-500">29,1% economia</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                    Aprovado
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                <div class="dropdown">
                                    <button class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition flex items-center space-x-2">
                                        <i class="fas fa-cog"></i>
                                        <span>Opções</span>
                                        <i class="fas fa-chevron-down text-xs"></i>
                                    </button>
                                    <div class="dropdown-content">
                                        <div class="dropdown-item approve" onclick="aprovarCenario(5)">
                                            <i class="fas fa-check-circle text-green-600"></i>
                                            <span>Aprovar Cenário</span>
                                        </div>
                                        <div class="dropdown-item" onclick="visualizarCenario(5)">
                                            <i class="fas fa-eye text-blue-600"></i>
                                            <span>Visualizar</span>
                                        </div>
                                        <div class="dropdown-item" onclick="duplicarCenario(5)">
                                            <i class="fas fa-copy text-green-600"></i>
                                            <span>Duplicar</span>
                                        </div>
                                        <div class="dropdown-item" onclick="downloadRelatorio(5)">
                                            <i class="fas fa-download text-yellow-600"></i>
                                            <span>Download Relatório</span>
                                        </div>
                                        <div class="dropdown-item danger" onclick="excluirCenario(5)">
                                            <i class="fas fa-trash text-red-600"></i>
                                            <span>Excluir</span>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Paginação -->
            <div class="px-6 py-4 border-t border-gray-200 flex items-center justify-between">
                <div class="text-sm text-gray-700">
                    Mostrando <span class="font-medium">1</span> a <span class="font-medium">5</span> de <span class="font-medium">27</span> cenários
                </div>
                <div class="flex items-center space-x-2">
                    <button class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                        Anterior
                    </button>
                    <button class="px-3 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md">
                        1
                    </button>
                    <button class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                        2
                    </button>
                    <button class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                        3
                    </button>
                    <button class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                        Próximo
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Criar Novo Cenário -->
    <div id="createScenarioModal" class="fixed inset-0 z-50 hidden modal-backdrop">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full p-6">
                <!-- Header do Modal -->
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-bullseye text-green-600"></i>
                        <h3 class="text-xl font-bold text-gray-800">Simular Novo Cenário</h3>
                    </div>
                    <button onclick="closeCreateScenarioModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <!-- Navegação por Abas -->
                <div class="flex mb-6">
                    <button id="tab-info" onclick="showStep('info')" class="flex-1 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-l-lg flex items-center justify-center space-x-2">
                        <i class="fas fa-user"></i>
                        <span>Informações do Cenário</span>
                    </button>
                    <button id="tab-problem" onclick="showStep('problem')" class="flex-1 px-4 py-2 text-sm font-medium text-gray-500 bg-gray-100 rounded-r-lg flex items-center justify-center space-x-2">
                        <i class="fas fa-bug"></i>
                        <span>Alvo e Problema</span>
                    </button>
                </div>

                <!-- Etapa 1: Informações do Cenário -->
                <div id="step-info" class="step-content">
                    <div class="mb-6">
                        <div class="flex items-center space-x-2 mb-2">
                            <i class="fas fa-user text-blue-600"></i>
                            <h4 class="text-lg font-semibold text-blue-600">Etapa 1: Informações do Cenário</h4>
                        </div>
                        <p class="text-gray-600 text-sm">Defina o agricultor, fazenda e área que será analisada</p>
                    </div>

                    <form id="createScenarioForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="flex items-center space-x-2 text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-user-tie text-gray-500"></i>
                                    <span>Agricultor *</span>
                                </label>
                                <select id="agricultor" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm">
                                    <option value="">Selecione um agricultor...</option>
                                    <option value="fazenda-sao-joao">Fazenda São João</option>
                                    <option value="agropecuaria-silva">Agropecuária Silva</option>
                                    <option value="fazenda-esperanca">Fazenda Esperança</option>
                                    <option value="cooperativa-central">Cooperativa Central</option>
                                    <option value="fazenda-boa-vista">Fazenda Boa Vista</option>
                                </select>
                            </div>

                            <div>
                                <label class="flex items-center space-x-2 text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-chart-line text-gray-500"></i>
                                    <span>Demanda</span>
                                </label>
                                <select id="demanda" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm">
                                    <option value="">Selecione a demanda...</option>
                                    <option value="soja-vista-2025">Soja à Vista 2025</option>
                                    <option value="milho-prazo-2026">Milho à Prazo 2026</option>
                                    <option value="algodao-vista-2025">Algodão à Vista 2025</option>
                                    <option value="trigo-vista-2025">Trigo à Vista 2025</option>
                                </select>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="flex items-center space-x-2 text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-map-marker-alt text-gray-500"></i>
                                    <span>Fazenda/Talhão</span>
                                </label>
                                <select id="fazenda" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm">
                                    <option value="">Selecione a propriedade...</option>
                                    <option value="talhao-1">Talhão 1 - Norte</option>
                                    <option value="talhao-2">Talhão 2 - Sul</option>
                                    <option value="talhao-3">Talhão 3 - Leste</option>
                                    <option value="talhao-4">Talhão 4 - Oeste</option>
                                </select>
                            </div>

                            <div>
                                <label class="flex items-center space-x-2 text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-ruler text-gray-500"></i>
                                    <span>Área (hectares)</span>
                                </label>
                                <div class="relative">
                                    <input type="number" id="area" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm" placeholder="Área será preenchida automaticamente" readonly>
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                        <span class="text-gray-400 text-xs">ha</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="flex items-center space-x-2 text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-calendar text-gray-500"></i>
                                <span>Data Prevista de Aplicação</span>
                            </label>
                            <input type="date" id="dataAplicacao" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm">
                        </div>

                        <div>
                            <label class="flex items-center space-x-2 text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-sticky-note text-gray-500"></i>
                                <span>Observações</span>
                            </label>
                            <textarea id="observacoes" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm" placeholder="Observações sobre o cenário..."></textarea>
                        </div>
                    </form>
                </div>

                <!-- Etapa 2: Alvo e Problema -->
                <div id="step-problem" class="step-content hidden">
                    <div class="mb-6">
                        <div class="flex items-center space-x-2 mb-2">
                            <i class="fas fa-bug text-green-600"></i>
                            <h4 class="text-lg font-semibold text-green-600">Etapa 2: Problema Alvo</h4>
                        </div>
                        <p class="text-gray-600 text-sm">Selecione o problema para a cultura <span id="selectedCulture" class="font-medium text-green-600"></span> selecionada na demanda anterior.</p>
                    </div>

                    <div class="space-y-6">
                        <div>
                            <label class="flex items-center space-x-2 text-sm font-medium text-gray-700 mb-3">
                                <i class="fas fa-exclamation-triangle text-orange-500"></i>
                                <span>Problema Alvo</span>
                            </label>
                            <select id="problemaAlvo" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm">
                                <option value="">Selecione o problema...</option>
                                <option value="lagarta-soja">Lagarta-da-soja - (Anticarsia gemmatalis)</option>
                                <option value="percevejo-marrom">Percevejo-marrom - (Euschistus heros)</option>
                                <option value="buva-caruru">Buva + Caruru - (Conyza spp. + Amaranthus spp.)</option>
                                <option value="lagarta-cartucho">Lagarta-do-cartucho - (Spodoptera frugiperda)</option>
                                <option value="ferrugem-asiatica">Ferrugem-asiática - (Phakopsora pachyrhizi)</option>
                                <option value="acaro-pulgao">Ácaro + Pulgão - (Tetranychus urticae + Aphis gossypii)</option>
                            </select>
                        </div>

                        <div>
                            <label class="flex items-center space-x-2 text-sm font-medium text-gray-700 mb-3">
                                <i class="fas fa-thermometer-half text-red-500"></i>
                                <span>Nível de Infestação</span>
                            </label>
                            <div class="flex flex-wrap gap-6">
                                <label class="flex items-center space-x-3 cursor-pointer">
                                    <input type="radio" name="nivelInfestacao" value="baixa" class="w-4 h-4 text-green-600 focus:ring-green-500">
                                    <div class="flex items-center space-x-2">
                                        <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                                        <span class="text-sm font-medium text-green-700">Baixa (0-20%)</span>
                                    </div>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer">
                                    <input type="radio" name="nivelInfestacao" value="media" class="w-4 h-4 text-orange-600 focus:ring-orange-500" checked>
                                    <div class="flex items-center space-x-2">
                                        <span class="w-3 h-3 bg-orange-500 rounded-full"></span>
                                        <span class="text-sm font-medium text-orange-700">Média (20-50%)</span>
                                    </div>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer">
                                    <input type="radio" name="nivelInfestacao" value="alta" class="w-4 h-4 text-red-600 focus:ring-red-500">
                                    <div class="flex items-center space-x-2">
                                        <span class="w-3 h-3 bg-red-500 rounded-full"></span>
                                        <span class="text-sm font-medium text-red-700">Alta (50%+)</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div>
                            <label class="flex items-center space-x-2 text-sm font-medium text-gray-700 mb-3">
                                <i class="fas fa-exclamation-triangle text-orange-500"></i>
                                <span>Descrição do Problema</span>
                            </label>
                            <textarea id="descricaoProblema" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm" placeholder="Descreva detalhadamente o problema observado..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Botões de Navegação -->
                <div class="flex items-center justify-between pt-6 border-t border-gray-200">
                    <button id="btnAnterior" onclick="previousStep()" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition hidden">
                        ← Anterior
                    </button>
                    
                    <div class="flex items-center space-x-3">
                        <button type="button" onclick="closeCreateScenarioModal()" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition">
                            Cancelar
                        </button>
                        
                        <button id="btnProximo" onclick="nextStep()" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
                            Próximo →
                        </button>
                        
                        <button id="btnConcluir" onclick="submitScenario()" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition hidden">
                            ✓ Concluir
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 'info';
        
        // Funções do Modal
        function openCreateScenarioModal() {
            document.getElementById('createScenarioModal').classList.remove('hidden');
            showStep('info'); // Sempre iniciar na primeira etapa
        }
        
        function closeCreateScenarioModal() {
            document.getElementById('createScenarioModal').classList.add('hidden');
            currentStep = 'info'; // Reset para primeira etapa
        }
        
        // Função para mostrar etapas
        function showStep(step) {
            currentStep = step;
            
            // Esconder todas as etapas
            document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
            
            // Mostrar etapa atual
            document.getElementById('step-' + step).classList.remove('hidden');
            
            // Atualizar abas
            const tabInfo = document.getElementById('tab-info');
            const tabProblem = document.getElementById('tab-problem');
            
            if (step === 'info') {
                tabInfo.className = 'flex-1 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-l-lg flex items-center justify-center space-x-2';
                tabProblem.className = 'flex-1 px-4 py-2 text-sm font-medium text-gray-500 bg-gray-100 rounded-r-lg flex items-center justify-center space-x-2';
                
                // Esconder botão anterior, mostrar próximo
                document.getElementById('btnAnterior').classList.add('hidden');
                document.getElementById('btnProximo').classList.remove('hidden');
                document.getElementById('btnConcluir').classList.add('hidden');
            } else {
                tabInfo.className = 'flex-1 px-4 py-2 text-sm font-medium text-gray-500 bg-gray-100 rounded-l-lg flex items-center justify-center space-x-2';
                tabProblem.className = 'flex-1 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-r-lg flex items-center justify-center space-x-2';
                
                // Mostrar botão anterior, esconder próximo, mostrar concluir
                document.getElementById('btnAnterior').classList.remove('hidden');
                document.getElementById('btnProximo').classList.add('hidden');
                document.getElementById('btnConcluir').classList.remove('hidden');
                
                // Atualizar cultura selecionada
                updateSelectedCulture();
            }
        }
        
        // Função para ir para próxima etapa
        function nextStep() {
            if (currentStep === 'info') {
                // Validar campos obrigatórios da primeira etapa
                const agricultor = document.getElementById('agricultor').value;
                if (!agricultor) {
                    alert('Por favor, selecione um agricultor antes de continuar.');
                    return;
                }
                
                showStep('problem');
            }
        }
        
        // Função para voltar etapa
        function previousStep() {
            if (currentStep === 'problem') {
                showStep('info');
            }
        }
        
        // Atualizar cultura selecionada
        function updateSelectedCulture() {
            const demanda = document.getElementById('demanda').value;
            const selectedCultureEl = document.getElementById('selectedCulture');
            
            if (demanda.includes('soja')) {
                selectedCultureEl.textContent = 'Soja';
            } else if (demanda.includes('milho')) {
                selectedCultureEl.textContent = 'Milho';
            } else if (demanda.includes('algodao')) {
                selectedCultureEl.textContent = 'Algodão';
            } else if (demanda.includes('trigo')) {
                selectedCultureEl.textContent = 'Trigo';
            } else {
                selectedCultureEl.textContent = '';
            }
        }
        
        // Função para finalizar criação do cenário
        function submitScenario() {
            // Validar campos obrigatórios da segunda etapa
            const problemaAlvo = document.getElementById('problemaAlvo').value;
            const nivelInfestacao = document.querySelector('input[name="nivelInfestacao"]:checked').value;
            
            if (!problemaAlvo) {
                alert('Por favor, selecione um problema alvo antes de concluir.');
                return;
            }
            
            // Coletar todos os dados
            const scenarioData = {
                agricultor: document.getElementById('agricultor').value,
                demanda: document.getElementById('demanda').value,
                fazenda: document.getElementById('fazenda').value,
                area: document.getElementById('area').value,
                dataAplicacao: document.getElementById('dataAplicacao').value,
                observacoes: document.getElementById('observacoes').value,
                problemaAlvo: problemaAlvo,
                nivelInfestacao: nivelInfestacao,
                descricaoProblema: document.getElementById('descricaoProblema').value
            };
            
            console.log('Dados do cenário:', scenarioData);
            
            // Simular criação do cenário
            alert('Cenário criado com sucesso! Redirecionando para o dashboard...');
            
            // Fechar modal
            closeCreateScenarioModal();
            
            // Aqui você redirecionaria para a segunda tela (dashboard)
            // window.location.href = 'dashboard-cenario.html';
        }
        
        // Auto-preenchimento de área baseado na fazenda
        document.getElementById('fazenda').addEventListener('change', function() {
            const area = document.getElementById('area');
            const fazendaValues = {
                'talhao-1': '1500',
                'talhao-2': '2200', 
                'talhao-3': '800',
                'talhao-4': '3200'
            };
            
            if (fazendaValues[this.value]) {
                area.value = fazendaValues[this.value];
            }
        });
        
        // Funções das ações da tabela
        function aprovarCenario(id) {
            if (confirm('Tem certeza que deseja aprovar este cenário? Esta ação alterará o status para "Aprovado".')) {
                alert(`Cenário ${id} aprovado com sucesso!`);
                // Lógica para aprovar o cenário
                // Aqui você atualizaria o status na base de dados e recarregaria a tabela
                location.reload(); // Simula atualização da tabela
            }
        }
        
        function visualizarCenario(id) {
            alert(`Visualizando cenário ${id} - Redirecionando para dashboard...`);
            // Aqui redirecionaria para a tela de dashboard específica do cenário
        }
        
        function duplicarCenario(id) {
            alert(`Cenário ${id} duplicado com sucesso!`);
            // Lógica para duplicar o cenário
        }
        
        function downloadRelatorio(id) {
            alert(`Baixando relatório do cenário ${id}...`);
            // Lógica para download do relatório
        }
        
        function excluirCenario(id) {
            if (confirm('Tem certeza que deseja excluir este cenário?')) {
                alert(`Cenário ${id} excluído com sucesso!`);
                // Lógica para excluir o cenário
            }
        }
        
        // Fechar modal ao clicar fora
        document.getElementById('createScenarioModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCreateScenarioModal();
            }
        });
        
        // Fechar modal com ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeCreateScenarioModal();
            }
        });
    </script>
</body>
</html>